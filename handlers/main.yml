---
- name: clear auth_Linux
  file: path='{{ nifi_install_dir }}/{{ nifi_dir_name }}/conf/{{ item }}' state=absent
  with_items:
    - users.xml
    - authorizations.xml

- name: clear auth_Windows
  win_file: path='{{ nifi_install_dir }}\\{{ nifi_dir_name }}\\conf\\{{ item }}' state=absent
  with_items:
    - users.xml
    - authorizations.xml

- name: install nifi_Linux
  shell: {{ nifi_install_dir }}/{{ nifi_dir_name }}/bin/nifi.sh install

- name: install nifi_Windows
  win_nssm: name=NifiService state=started

- name: restart nifi_Linux
  service: name=nifi state=restarted

- name: restart nifi_Windows
  win_nssm: name=NifiService application="{{ nifi_install_dir }}\\{{ nifi_dir_name }}\\bin\\run-nifi.bat" start_mode=auto state=restarted
